<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>My Favorite Links</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            background-color: #f9f9f9;
        }
        h1 {
            color: #003366;
        }
        h2 {
            color: #004080;
            border-bottom: 2px solid #003366;
            padding-bottom: 5px;
        }
        ul {
            list-style-type: none;
            padding-left: 0;
        }
        li {
            margin-bottom: 10px;
        }
        a {
            color: #1a73e8;
            text-decoration: none;
        }
        a:hover {
            text-decoration: underline;
        }
        .section-row {
            display: flex;
            gap: 40px;
            align-items: flex-start;
        }
        .subsection {
            flex: 1;
        }
    </style>
   <script>
    function recordVisit(linkName) {
        const now = new Date().toLocaleString();
        localStorage.setItem(linkName, now);
    }

    async function decryptAndCopy(buttonEl) {
        const passwordInput = buttonEl.previousElementSibling;
        const password = passwordInput.value;
        const base64Data = buttonEl.getAttribute("data-encrypted");

        if (!password || !base64Data) {
            alert("Missing password or data.");
            return;
        }

        const encryptedBytes = Uint8Array.from(atob(base64Data), c => c.charCodeAt(0));
        const salt = encryptedBytes.slice(0, 16);
        const iv = encryptedBytes.slice(16, 28);
        const ciphertext = encryptedBytes.slice(28);

        const enc = new TextEncoder();
        const encodedPassword = enc.encode(password);

        try {
            const keyMaterial = await crypto.subtle.importKey(
                "raw",
                encodedPassword,
                { name: "PBKDF2" },
                false,
                ["deriveKey"]
            );

            const key = await crypto.subtle.deriveKey(
                {
                    name: "PBKDF2",
                    salt: salt,
                    iterations: 100000,
                    hash: "SHA-256"
                },
                keyMaterial,
                { name: "AES-GCM", length: 256 },
                false,
                ["decr]()
